#include "xparameters.h"
#include "xaxidma.h"
#include "xil_printf.h"

int main() {
    xil_printf("=== DMA CHECK ===\r\n");

    XAxiDma_Config *cfg;
    cfg = XAxiDma_LookupConfig(XPAR_AXIDMA_0_DEVICE_ID);
    if (!cfg) {
        xil_printf("Lookup failed!\r\n");
        return -1;
    }

    xil_printf("Config addr = 0x%08x\r\n", cfg->BaseAddr);

    XAxiDma dma;
    if (XAxiDma_CfgInitialize(&dma, cfg) != XST_SUCCESS) {
        xil_printf("DMA init failed!\r\n");
        return -1;
    }

    xil_printf("DMA init success!\r\n");
    return 0;
}
